<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>PayRequest | c-lightning.ts</title><meta name="description" content="Documentation for c-lightning.ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">c-lightning.ts</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">c-lightning.ts</a></li><li><a href="PayRequest.html">PayRequest</a></li></ul><h1>Interface PayRequest</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>The <strong>pay</strong> RPC command attempts to find a route to the given
destination, and send the funds it asks for. If the <em>bolt11</em> does not
contain an amount, <em>msatoshi</em> is required, otherwise if it is specified
it must be <em>null</em>. <em>msatoshi</em> is in millisatoshi precision; it can be a
whole number, or a whole number with suffix <em>msat</em> or <em>sat</em>, or a three
decimal point number with suffix <em>sat</em>, or an 1 to 11 decimal point
number suffixed by <em>btc</em>.</p>
</div><div><p>(Note: if <strong>experimental-offers</strong> is enabled, <em>bolt11</em> can actually be
a bolt12 invoice, such as one received from lightningd-fetchinvoice(7)).</p>
<p>The <em>label</em> field is used to attach a label to payments, and is returned
in lightning-listpays(7) and lightning-listsendpays(7). The <em>riskfactor</em>
is described in detail in lightning-getroute(7), and defaults to 10. The
<em>maxfeepercent</em> limits the money paid in fees, and defaults to 0.5. The
<code>maxfeepercent</code> is a percentage of the amount that is to be paid. The <code>exemptfee</code>
option can be used for tiny payments which would be dominated by the fee
leveraged by forwarding nodes. Setting <code>exemptfee</code> allows the
<code>maxfeepercent</code> check to be skipped on fees that are smaller than
<code>exemptfee</code> (default: 5000 millisatoshi).</p>
<p>The response will occur when the payment fails or succeeds. Once a
payment has succeeded, calls to <strong>pay</strong> with the same <em>bolt11</em> will
succeed immediately.</p>
<p>Until <em>retry_for</em> seconds passes (default: 60), the command will keep
finding routes and retrying the payment. However, a payment may be
delayed for up to <code>maxdelay</code> blocks by another node; clients should be
prepared for this worst case.</p>
<p><em>exclude</em> is a JSON array of short-channel-id/direction (e.g. [
&quot;564334x877x1/0&quot;, &quot;564195x1292x0/1&quot; ]) or node-id which should be excluded
from consideration for routing. The default is not to exclude any channels
or nodes.</p>
<p>When using <em>lightning-cli</em>, you may skip optional parameters by using
<em>null</em>. Alternatively, use <strong>-k</strong> option to provide parameters by name.</p>

<a href="#randomization" id="randomization" style="color: inherit; text-decoration: none;">
  <h2>RANDOMIZATION</h2>
</a>
<p>To protect user privacy, the payment algorithm performs some
randomization.</p>
<p>1: Route Randomization</p>
<p>Route randomization means the payment algorithm does not always use the
lowest-fee or shortest route. This prevents some highly-connected node
from learning all of the user payments by reducing their fees below the
network average.</p>
<p>2: Shadow Route</p>
<p>Shadow route means the payment algorithm will virtually extend the route
by adding delays and fees along it, making it appear to intermediate nodes
that the route is longer than it actually is. This prevents intermediate
nodes from reliably guessing their distance from the payee.</p>
<p>Route randomization will never exceed <em>maxfeepercent</em> of the payment.
Route randomization and shadow routing will not take routes that would
exceed <em>maxdelay</em>.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">PayRequest</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#bolt11" class="tsd-kind-icon">bolt11</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#exclude" class="tsd-kind-icon">exclude</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#exemptfee" class="tsd-kind-icon">exemptfee</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#label" class="tsd-kind-icon">label</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#maxdelay" class="tsd-kind-icon">maxdelay</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#maxfeepercent" class="tsd-kind-icon">maxfeepercent</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#msatoshi" class="tsd-kind-icon">msatoshi</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#retry_for" class="tsd-kind-icon">retry_<wbr/>for</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#riskfactor" class="tsd-kind-icon">riskfactor</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="bolt11" class="tsd-anchor"></a><h3 class="tsd-anchor-link">bolt11<a href="#bolt11" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">bolt11<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L72">generated/pay.ts:72</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="exclude" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> exclude<a href="#exclude" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">exclude<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L80">generated/pay.ts:80</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="exemptfee" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> exemptfee<a href="#exemptfee" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">exemptfee<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L79">generated/pay.ts:79</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="label" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> label<a href="#label" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">label<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L74">generated/pay.ts:74</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="maxdelay" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> maxdelay<a href="#maxdelay" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">maxdelay<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L78">generated/pay.ts:78</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="maxfeepercent" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> maxfeepercent<a href="#maxfeepercent" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">maxfeepercent<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L76">generated/pay.ts:76</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="msatoshi" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> msatoshi<a href="#msatoshi" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">msatoshi<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L73">generated/pay.ts:73</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="retry_for" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> retry_<wbr/>for<a href="#retry_for" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">retry_<wbr/>for<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L77">generated/pay.ts:77</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="riskfactor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> riskfactor<a href="#riskfactor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">riskfactor<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/runcitadel/c-lightning-client/blob/c0324b2/src/generated/pay.ts#L75">generated/pay.ts:75</a></li></ul></aside></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface"><a href="PayRequest.html" class="tsd-kind-icon">Pay<wbr/>Request</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#bolt11" class="tsd-kind-icon">bolt11</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#exclude" class="tsd-kind-icon">exclude</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#exemptfee" class="tsd-kind-icon">exemptfee</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#label" class="tsd-kind-icon">label</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#maxdelay" class="tsd-kind-icon">maxdelay</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#maxfeepercent" class="tsd-kind-icon">maxfeepercent</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#msatoshi" class="tsd-kind-icon">msatoshi</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#retry_for" class="tsd-kind-icon">retry_<wbr/>for</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="PayRequest.html#riskfactor" class="tsd-kind-icon">riskfactor</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>